(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{580:function(e,t,a){e.exports={container:"style_container__3FZwK",langing:"style_langing__2FxVN",articleInfo:"style_articleInfo__1d5v-",articleCategory:"style_articleCategory__35I8s",articleLabel:"style_articleLabel__26rCk",issueCommentsContainer:"style_issueCommentsContainer__3eK_x",issueComment:"style_issueComment__2oN0w",commentorAvatar:"style_commentorAvatar__BkYRh",issueCommentHeader:"style_issueCommentHeader__1lxXR",issueCommentContent:"style_issueCommentContent__2bwiX",createCommentContainer:"style_createCommentContainer__mllTZ",createComment:"style_createComment__3rcPo",createCommentAvatar:"style_createCommentAvatar__1v_t3",createCommentHeader:"style_createCommentHeader__3opNa",commentSwitch:"style_commentSwitch__2d5YM",active:"style_active__6_-G8",commentorLogin:"style_commentorLogin__2fsAa",createCommentInputContainer:"style_createCommentInputContainer__2VtH6",createCommentTextarea:"style_createCommentTextarea__mjrW_",createCommentOperator:"style_createCommentOperator__2pW3w",articleBody:"style_articleBody__2JILV"}},582:function(e,t,a){e.exports=a.p+"static/media/github.c9e82c1f.svg"},585:function(e,t,a){"use strict";a.r(t);var n=a(366),r=a(367),s=a(369),m=a(368),c=a(370),l=a(0),o=a.n(l),i=a(89),u=a(584),d=a(371),_=a(372),p=a.n(_),f=a(374),C=a.n(f),h=a(88),v=a(13),y=a(580),E=a.n(y),g=a(582),b=a.n(g),N=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).handleInput=function(e){e.preventDefault();var t=e.currentTarget;t.style.height="auto",t.style.height=t.scrollTop+t.scrollHeight+"px"},a.handleSubmitComment=function(e){e.preventDefault();var t=a.comment.value;if(t){var n=a.props,r=n.dispatch,s=n.currentIssue;r.user.addComment({id:s.id,content:t,callback:function(){a.comment.value=""}})}},a.handleBack=function(){a.props.history.goBack()},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.match.params.number;t.user.getAuthToken(),t.repository.getSingleIssue(a)}},{key:"componentWillUnmount",value:function(){this.props.dispatch.repository.closeCurrentIssue()}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.labelsMap,r=t.commentsMap,s=t.currentIssue,m=t.milestonesMap,c=t.viewer,i=t.isUserLoading;return o.a.createElement(l.Fragment,null,o.a.createElement("div",{className:E.a.langing},o.a.createElement("i",{onClick:this.handleBack,className:"fa fa-chevron-left"}),o.a.createElement("p",null,"\u6587\u7ae0\u8be6\u60c5")),o.a.createElement(h.a,{loading:a},o.a.createElement("div",{className:E.a.container},o.a.createElement("header",null,o.a.createElement("h1",null,s.title),o.a.createElement("p",{className:E.a.articleInfo},o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-calendar","aria-hidden":"true"}),C()(s.createdAt).format("YYYY-MM-DD")),o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-th-list","aria-hidden":"true"}),o.a.createElement("span",{className:E.a.articleCategory},s.milestone&&m[s.milestone].title)),o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}),s.labels&&s.labels.nodes.map(function(e){var t=n[e];return o.a.createElement("span",{key:t.id,className:E.a.articleLabel,style:{background:"#".concat(t.color)}},t.name)})))),o.a.createElement("main",null,o.a.createElement("article",{className:p()(E.a.articleBody,"markdown-body"),dangerouslySetInnerHTML:{__html:s.bodyHTML}}),o.a.createElement("div",{className:E.a.issueCommentsContainer},s.comments&&s.comments.nodes.map(function(e){var t=r[e];if(t){var a=t.author;return o.a.createElement("section",{key:t.id,className:E.a.issueComment},o.a.createElement("a",{className:E.a.commentorAvatar,href:a.url},o.a.createElement("img",{src:a.avatarUrl,alt:"This is commentor's avatar"})),o.a.createElement("p",{className:E.a.issueCommentHeader},o.a.createElement("a",{href:a.url},o.a.createElement("em",null,a.login)),o.a.createElement("span",null,C()(t.createdAt).format("YYYY-MM-DD HH:mm:ss"))),o.a.createElement("article",{className:p()(E.a.issueCommentContent,"markdown-body"),dangerouslySetInnerHTML:{__html:t.bodyHTML}}))}return null}),o.a.createElement("section",{className:E.a.createCommentContainer},o.a.createElement("div",{className:E.a.createComment},c.id?o.a.createElement("div",{className:E.a.createCommentAvatar},o.a.createElement("img",{src:c.avatarUrl,alt:"This is commentor's avatar"})):o.a.createElement("a",{className:E.a.createCommentAvatar,href:Object(v.e)()},i?o.a.createElement("i",{className:"fa fa-refresh fa-spin fa-3x fa-fw"}):o.a.createElement("img",{src:b.a,alt:"This is commentor's avatar"})),o.a.createElement("div",{className:E.a.createCommentHeader},o.a.createElement("span",{className:p()(E.a.commentSwitch,E.a.active)},"\u7f16\u8f91"),o.a.createElement("span",{className:E.a.commentSwitch},"\u9884\u89c8"),!c.id&&!i&&o.a.createElement("span",{className:E.a.commentorLogin},o.a.createElement("a",{href:Object(v.e)()},"\u767b\u9646"))),o.a.createElement("div",{className:E.a.createCommentInputContainer},o.a.createElement("textarea",{ref:function(t){return e.comment=t},onInput:this.handleInput,className:E.a.createCommentTextarea,placeholder:"\u8bf7\u7f16\u8f91\u60a8\u7684\u8bc4\u8bba"})),o.a.createElement("div",{className:E.a.createCommentOperator},o.a.createElement("button",{onClick:this.handleSubmitComment},"\u8bc4\u8bba")))))))))}}]),t}(l.Component),w=Object(d.a)([function(e){return e.repository.result},function(e){return e.repository.loading},function(e){return e.entities.repositories},function(e){return e.entities.issues},function(e){return e.entities.milestones},function(e){return e.entities.labels},function(e){return e.entities.comments},function(e){return e.user.viewer},function(e){return e.user.loading}],function(e,t,a,n,r,s,m,c,l){var o,i={},u=a[e];return u&&(o=u.issue),o&&(i=n[o]),{loading:t,currentIssue:i,milestonesMap:r,labelsMap:s,commentsMap:m,viewer:c,isUserLoading:l}});t.default=Object(i.b)(w)(Object(u.a)(N))}}]);
//# sourceMappingURL=5.5d088b3d.chunk.js.map