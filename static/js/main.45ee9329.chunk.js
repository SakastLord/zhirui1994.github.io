(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports={container:"style_container__1CTEx",header:"style_header__1VHED",navItem:"style_navItem__36neS",active:"style_active__3WdfJ",articlesContainer:"style_articlesContainer__2rKNV",article:"style_article__g0wxV",articleTitle:"style_articleTitle__17Rw5",articleInfo:"style_articleInfo__3Tym_",articleCategory:"style_articleCategory__f0xgF",articleLabel:"style_articleLabel__19l4_"}},173:function(e,t,n){e.exports=n(372)},368:function(e,t,n){},372:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(168),s=n.n(i),o=n(169),c=n(19),l=n(65),u=n(12),m=n.n(u),p=n(23),d=n(97),f=n.n(d),b=n(17),h={owner:"zhirui1994",repo:"zhirui1994.github.io",token:"8f44a1864faae2f7e74c71f266ebafc07b63c7e7"},y=new b.b.Entity("milestones"),v=new b.b.Entity("labels"),E=new b.b.Entity("comments"),_=new b.b.Entity("issues",{milestone:y,labels:{nodes:[v]},comments:{nodes:[E]}}),g=new b.b.Entity("repositories",{issue:_,issues:{nodes:[_]},labels:{nodes:[v]},milestones:{nodes:[y]}});function w(){return O.apply(this,arguments)}function O(){return(O=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("https://api.github.com/graphql",{query:'query { \n                repository(owner: "'.concat(h.owner,'", name: "').concat(h.repo,'") {\n                    id,\n                    labels(first: 100) {\n                        nodes {\n                            id,\n                            name,\n                            color,\n                        } \n                    },\n                    milestones(first:100) {\n                        nodes {\n                            id,\n                            number,\n                            state,\n                            title,\n                        }\n                    },\n                    issues(last:20, states:OPEN) {\n                        pageInfo {\n                            endCursor,\n                            startCursor,\n                            hasNextPage,\n                            hasPreviousPage\n                        },\n                        totalCount,\n                        nodes {\n                            id,\n                            title,\n                            number,\n                            createdAt,\n                            milestone {\n                                id\n                            },\n                            labels(first:100) {\n                                nodes {\n                                    id,\n                                }\n                            }\n                        }\n                    }\n                }\n            }')},{headers:{Authorization:"bearer ".concat(h.token)}}).then(function(e){return Object(b.a)(e.data.data.repository,g)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function j(e){return k.apply(this,arguments)}function k(){return(k=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("https://api.github.com/graphql",{query:'query { \n                repository(owner: "'.concat(h.owner,'", name: "').concat(h.repo,'") {\n                    id,\n                    issue(number: ').concat(t,") {\n                        id,\n                        title,\n                        number,\n                        bodyHTML,\n                        createdAt,\n                        milestone {\n                            id,\n                            number,\n                            state,\n                            title,\n                        },\n                        labels(first:100) {\n                            nodes {\n                                id,\n                                name,\n                                color,\n                            }\n                        },\n                        comments(last: 20) {\n                            nodes {\n                                id,\n                                author {\n                                    avatarUrl,\n                                    login,\n                                    url,\n                                },\n                                bodyHTML,\n                                createdAt,\n                            }\n                        }\n                    }\n                }\n            }")},{headers:{Authorization:"bearer ".concat(h.token)}}).then(function(e){return Object(b.a)(e.data.data.repository,g)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var x=n(106),N={name:"repository",state:{result:""},reducers:{update:function(e,t){return x.merge(e,t)}},effects:function(e){return{initIndex:function(){var t=Object(p.a)(m.a.mark(function t(){var n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:if(!(n=t.sent)){t.next=8;break}return t.next=6,e.entities.update(n.entities);case 6:return t.next=8,e.repository.update({result:n.result});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getSingleIssue:function(){var t=Object(p.a)(m.a.mark(function t(n){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(n);case 2:if(!(a=t.sent)){t.next=8;break}return t.next=6,e.entities.update(a.entities);case 6:return t.next=8,e.repository.update({result:a.result});case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),closeCurrentIssue:function(){var t=Object(p.a)(m.a.mark(function t(n,a){var r,i,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.repository.result,!(i=a.entities.repositories[r])){t.next=7;break}return i.issue=void 0,s={repositories:Object(l.a)({},r,i)},t.next=7,e.entities.update(s);case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}}},I=n(106),C={entities:{name:"entities",state:{repositories:{},issues:{},labels:{},milestones:{},comments:{}},reducers:{update:function(e,t){return I.merge(e,t)}}},repository:N};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=n(373),L=n(376),A=n(365),T=n(33),Y=n(34),D=n(36),S=n(35),q=n(37),B=n(66),H=n.n(B),z=n(67),P=n.n(z),W=n(68),F=n(374),J=n(13),V=n.n(J),U={title:"\u6700\u65b0",id:"default_milestone"},K={nodes:[],pageInfo:{},totalCount:0},R=function(e){function t(){var e;Object(T.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=Object(D.a)(this,Object(S.a)(t).call(this,a))).state={activeMilestone:U},e}return Object(q.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch.repository.initIndex()}},{key:"render",value:function(){var e=this.state.activeMilestone,t=this.props,n=t.issuesList,a=t.milestonesList,i=t.milestonesMap,s=t.labelsMap;return r.a.createElement("div",{className:V.a.container},r.a.createElement("header",{className:V.a.header},r.a.createElement("nav",null,a.map(function(t){return r.a.createElement("span",{key:t.id,className:H()(V.a.navItem,Object(l.a)({},V.a.active,t.title===e.title))},t.title)}))),r.a.createElement("main",{className:V.a.articlesContainer},n.map(function(e){return r.a.createElement("article",{className:V.a.article,key:e.id},r.a.createElement(F.a,{to:"/article/".concat(e.number)},r.a.createElement("h3",{className:V.a.articleTitle},e.title)),r.a.createElement("p",{className:V.a.articleInfo},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-calendar","aria-hidden":"true"}),P()(e.createdAt).format("YYYY-MM-DD")),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-th-list","aria-hidden":"true"}),r.a.createElement("span",{className:V.a.articleCategory},i[e.milestone].title)),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}),e.labels.nodes.map(function(e){var t=s[e];return r.a.createElement("span",{key:t.id,className:V.a.articleLabel,style:{background:"#".concat(t.color)}},t.name)}))))})))}}]),t}(a.Component),$=Object(W.a)([function(e){return e.repository.result},function(e){return e.entities.repositories},function(e){return e.entities.issues},function(e){return e.entities.milestones},function(e){return e.entities.labels}],function(e,t,n,a,r){var i=t[e],s=Object.keys(a).map(function(e){return a[e]});s.length&&s.unshift(U);var o=K;return i&&(o=i.issues),{labelsMap:r,milestonesMap:a,milestonesList:s,issuesList:o.nodes.map(function(e){return n[e]}),pageInfo:o.pageInfo,totalCount:o.totalCount}}),G=Object(c.b)($)(R),Q=n(48),X=function(e){function t(){var e,n;Object(T.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=n.handleSubmit.bind(Object(Q.a)(Object(Q.a)(n))),n}return Object(q.a)(t,e),Object(Y.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.dispatch;this.title&&this.body&&t.issues.create({title:this.title.value,body:this.body.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Editor"},r.a.createElement("header",{className:"App-header"},"\u6587\u7ae0\u7f16\u8f91\u9875\uff01"),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"title"},"\u6807\u9898\uff1a",r.a.createElement("input",{ref:function(t){return e.title=t},type:"text",id:"title"})),r.a.createElement("label",{htmlFor:"body"},"\u5185\u5bb9\uff1a",r.a.createElement("textarea",{ref:function(t){return e.body=t},cols:"60",rows:"5",id:"body"})),r.a.createElement("input",{onClick:this.handleSubmit,type:"submit",value:"\u521b\u5efa"})))}}]),t}(a.Component),Z=Object(c.b)()(X),ee=n(375),te=n(38),ne=n.n(te),ae=function(e){function t(){return Object(T.a)(this,t),Object(D.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.match.params.number;t.repository.getSingleIssue(n)}},{key:"componentWillUnmount",value:function(){this.props.dispatch.repository.closeCurrentIssue()}},{key:"render",value:function(){var e=this.props,t=e.currentIssue,n=e.labelsMap,a=e.milestonesMap;return r.a.createElement("div",{className:ne.a.container},r.a.createElement("header",null,r.a.createElement("h1",null,t.title),r.a.createElement("p",{className:ne.a.articleInfo},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-calendar","aria-hidden":"true"}),P()(t.createdAt).format("YYYY-MM-DD")),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-th-list","aria-hidden":"true"}),r.a.createElement("span",{className:ne.a.articleCategory},t.milestone&&a[t.milestone].title)),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}),t.labels&&t.labels.nodes.map(function(e){var t=n[e];return r.a.createElement("span",{key:t.id,className:ne.a.articleLabel,style:{background:"#".concat(t.color)}},t.name)})))),r.a.createElement("main",null,r.a.createElement("article",{className:H()(ne.a.articleBody,"markdown-body"),dangerouslySetInnerHTML:{__html:t.bodyHTML}})))}}]),t}(a.Component),re=Object(W.a)([function(e){return e.repository.result},function(e){return e.entities.repositories},function(e){return e.entities.issues},function(e){return e.entities.milestones},function(e){return e.entities.labels}],function(e,t,n,a,r){var i,s={},o=t[e];return o&&(i=o.issue),i&&(s=n[i]),{currentIssue:s,milestonesMap:a,labelsMap:r}}),ie=[{path:"/",exact:!0,component:G},{path:"/editor",exact:!0,component:Z},{path:"/article/:number",exact:!0,component:Object(c.b)(re)(Object(ee.a)(ae))}],se=function(){return r.a.createElement(M.a,null,r.a.createElement(L.a,null,ie.map(function(e){return r.a.createElement(A.a,{key:e.path,path:e.path,exact:e.exact,component:e.component})})))};n(368);n.d(t,"store",function(){return oe});var oe=Object(o.init)({models:C});s.a.render(r.a.createElement(c.a,{store:oe},r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},38:function(e,t,n){e.exports={container:"style_container__vgro-",articleInfo:"style_articleInfo__3N387",articleCategory:"style_articleCategory__2Yp5u",articleLabel:"style_articleLabel__EAk0-",articleBody:"style_articleBody__nw0TM"}}},[[173,2,1]]]);
//# sourceMappingURL=main.45ee9329.chunk.js.map