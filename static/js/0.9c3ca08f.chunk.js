(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{386:function(e,t,a){e.exports={markdownPreviewer:"style_markdownPreviewer__2WsNP",editController:"style_editController__3XAKQ",active:"style_active__1Idr8"}},577:function(e,t,a){e.exports={editorContainer:"style_editorContainer__1Wmff",header:"style_header__1BwOO",titleInput:"style_titleInput__3EojG",fileds:"style_fileds__3fShH",checkLabel:"style_checkLabel__23t6_",submitButton:"style_submitButton__18BxS",editorContent:"style_editorContent__KEm5X"}},588:function(e,t,a){"use strict";a.r(t);var n=a(23),l=a(583),i=a(368),r=a(369),s=a(371),o=a(370),c=a(372),u=a(0),m=a.n(u),d=a(374),p=a.n(d),h=a(579),b=a(584),f=a(89),v=a(373),y=a(385),k=a.n(y),g=a(386),C=a.n(g),E=a(388),_=a.n(E);a(575);k.a.setOptions({breaks:!0,highlight:function(e){return _.a.highlightAuto(e).value}});var O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={isEdiotr:!0},a.handleInput=function(e){var t=a.props.onChange,n=a.editor.value;e.preventDefault(),"function"===typeof t&&t(n),a.preview.innerHTML=k()(n)},a.handleClickPreview=function(){a.setState({isEdiotr:!1})},a.handleClickEditor=function(){a.setState({isEdiotr:!0})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.defaultValue;e&&(this.preview.innerHTML=k()(e))}},{key:"render",value:function(){var e=this,t=this.props.defaultValue,a=this.state.isEdiotr;return m.a.createElement("div",{className:C.a.markdownPreviewer},m.a.createElement("ul",{className:C.a.editController},m.a.createElement("li",{onClick:this.handleClickPreview,className:a?"hidden":C.a.active},"\u9884\u89c8"),m.a.createElement("li",{onClick:this.handleClickEditor,className:a?C.a.active:"hidden"},"\u7f16\u8f91")),m.a.createElement("textarea",{id:"editor",spellCheck:"false",className:a?C.a.active:"hidden",ref:function(t){return e.editor=t},onInput:this.handleInput,defaultValue:t}),m.a.createElement("section",{className:a?"hidden":C.a.active,id:"preview",ref:function(t){return e.preview=t}}))}}]),t}(u.Component),N=a(88),w=a(90),j=a(577),I=a.n(j),L=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={title:"",body:"",milestone:void 0,labels:[]},a.handleChange=function(e){a.setState({body:e})},a.handleTitleChange=function(e){var t=e.target.value;a.setState({title:t})},a.handleRadioClick=function(e){var t;if(e.stopPropagation(),"LABEL"===e.target.tagName?(e.preventDefault(),t=e.target.querySelector("input")):"INPUT"===e.target.tagName&&(t=e.target),t){var n=+t.value;a.state.milestone===n?a.setState({milestone:void 0}):a.setState({milestone:n})}return!1},a.handleCheckboxClick=function(e){var t;if(e.stopPropagation(),"LABEL"===e.target.tagName?(e.preventDefault(),t=e.target.querySelector("input")):"INPUT"===e.target.tagName&&(t=e.target),t){var n=a.state.labels,i=t.value,r=n.indexOf(i);-1!==r?(n.splice(r,1),a.setState({labels:Object(l.a)(n)})):(n.push(i),a.setState({labels:Object(l.a)(n)}))}return!1},a.handleSubmit=function(e){e.preventDefault(),e.stopPropagation();var t=a.props.dispatch,l=a.state,i=l.title,r=l.body,s=l.milestone,o=l.labels;if(i&&r&&s&&o){var c={title:i,body:r,labels:o,milestone:s,callback:function(e){a.props.history.push(e)}},u=a.number;u?t.repository.editIssue(Object(n.a)({},c,{number:u})):t.repository.createIssue(c)}},a.handleBack=function(){a.props.history.goBack()},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.labelsList,a=e.milestonesList,n=e.dispatch,l=this.number;t.length&&a.length&&!l||n.repository.initEditor(l)}},{key:"componentWillUnmount",value:function(){this.props.dispatch.repository.closeCurrentIssue()}},{key:"render",value:function(){var e=this,t=this.props,a=t.labelsList,n=t.milestonesList,l=t.loading,i=this.number;return m.a.createElement("div",{className:I.a.editorContainer},m.a.createElement("header",{className:I.a.header},m.a.createElement("i",{onClick:this.handleBack,className:"fa fa-chevron-left"}),m.a.createElement("p",null,"\u6587\u7ae0\u7f16\u8f91")),m.a.createElement(N.a,{loading:l},m.a.createElement("main",null,m.a.createElement("form",null,m.a.createElement("label",{className:I.a.fileds,htmlFor:"title"},"\u6807\u9898\uff1a",m.a.createElement("input",{type:"text",id:"title",className:I.a.titleInput,defaultValue:this.state.title,onChange:this.handleTitleChange})),m.a.createElement("label",{className:p()(I.a.fileds,I.a.editorContent),htmlFor:"editor"},"\u5185\u5bb9\uff1a",m.a.createElement(O,{defaultValue:this.state.body,onChange:this.handleChange})),m.a.createElement("label",{className:I.a.fileds,htmlFor:"milestone"},"\u5206\u7c7b\uff1a",n.map(function(t){return m.a.createElement("label",{key:t.id,className:I.a.checkLabel,onClick:e.handleRadioClick},m.a.createElement("input",{readOnly:!0,type:"radio",name:"categories",value:t.number,checked:e.state.milestone===t.number}),t.title)})),m.a.createElement("label",{className:I.a.fileds,htmlFor:"labels"},"\u6807\u7b7e\uff1a",a.map(function(t){return m.a.createElement("label",{key:t.id,className:I.a.checkLabel,onClick:e.handleCheckboxClick},m.a.createElement("input",{readOnly:!0,type:"checkbox",value:t.name,name:"label-".concat(t.name),checked:-1!==e.state.labels.indexOf(t.name)}),t.name)})),m.a.createElement("input",{type:"submit",value:i?"\u4fee\u6539":"\u521b\u5efa",className:I.a.submitButton,onClick:this.handleSubmit})))),m.a.createElement("footer",{style:{display:Object(w.b)()?"none":""}},m.a.createElement("p",null,"Copyright \xa9",(new Date).getFullYear()," Roy Zhi")))}},{key:"number",get:function(){return Object(h.a)(function(e){return e.params.number})(this.props.match)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.match,n=e.currentIssue,l=e.milestonesMap,i=e.labelsMap,r=t.prevCurrentIssue,s=a.params.number;if(s&&n&&n.number===+s&&n!==r){var o=n.title||"",c=n.body||"",u=l[n.milestone].number||"",m=n.labels&&n.labels.nodes&&n.labels.nodes.map(function(e){return i[e].name})||[];return{prevCurrentIssue:n,title:o,body:c,milestone:u,labels:m}}return null}}]),t}(u.PureComponent),S=Object(v.a)([function(e){return e.repository.result},function(e){return e.repository.loading},function(e){return e.entities.repositories},function(e){return e.entities.labels},function(e){return e.entities.milestones},function(e){return e.entities.issues}],function(e,t,a,n,l,i){var r,s=[],o=[],c=a[e];if(c&&c.labels&&c.labels.nodes&&c.milestones&&c.milestones.nodes){s=c.labels.nodes.map(function(e){return n[e]}),o=c.milestones.nodes.map(function(e){return l[e]});var u=c.issue;u&&(r=i[u])}return{loading:t,labelsMap:n,labelsList:s,milestonesMap:l,milestonesList:o,currentIssue:r}});t.default=Object(f.b)(S)(Object(b.a)(L))}}]);
//# sourceMappingURL=0.9c3ca08f.chunk.js.map