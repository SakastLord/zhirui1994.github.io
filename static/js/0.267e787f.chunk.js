(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{381:function(e,t,n){e.exports={markdownPreviewer:"style_markdownPreviewer__1aG82"}},572:function(e,t,n){e.exports={editorContainer:"style_editorContainer__2CpJ4",header:"style_header__b0b1a",fileds:"style_fileds__3fJcb",checkLabel:"style_checkLabel__3_j0j",submitButton:"style_submitButton__1urt6",editorContent:"style_editorContent__1vN33"}},583:function(e,t,n){"use strict";n.r(t);var a=n(22),l=n(578),r=n(363),i=n(364),s=n(366),o=n(365),u=n(367),c=n(0),m=n.n(c),p=n(369),d=n.n(p),b=n(574),h=n(579),f=n(88),v=n(368),y=n(380),k=n.n(y),C=n(381),g=n.n(C),E=n(383),_=n.n(E);n(570);k.a.setOptions({breaks:!0,highlight:function(e){return _.a.highlightAuto(e).value}});var O=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).handleInput=function(e){var t=n.props.onChange,a=n.editor.value;e.preventDefault(),"function"===typeof t&&t(a),n.preview.innerHTML=k()(a)},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.defaultValue;e&&(this.preview.innerHTML=k()(e))}},{key:"render",value:function(){var e=this,t=this.props.defaultValue;return m.a.createElement("div",{className:g.a.markdownPreviewer},m.a.createElement("textarea",{id:"editor",spellCheck:"false",ref:function(t){return e.editor=t},onInput:this.handleInput,defaultValue:t}),m.a.createElement("section",{id:"preview",ref:function(t){return e.preview=t}}))}}]),t}(c.Component),j=n(87),w=n(572),L=n.n(w),N=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(u)))).state={title:"",content:"",milestone:"",labels:[]},n.number=Object(b.a)(function(e){return e.params.number}),n.handleChange=function(e){n.setState({content:e})},n.handleRadioClick=function(e){var t,a=e.currentTarget;a&&(t=a.querySelector("input"))&&t&&(t.checked?n.setState({milestone:t.value}):n.setState({milestone:""}))},n.handleCheckboxClick=function(e){var t,a=e.currentTarget;if(a&&(t=a.querySelector("input"))&&t){var r=n.state.labels,i=r.indexOf(t.value);t.checked?-1===i&&(r.push(t.value),n.setState({labels:Object(l.a)(r)})):-1!==i&&(r.splice(i,1),n.setState({labels:Object(l.a)(r)}))}},n.handleSubmit=function(e){e.preventDefault(),e.stopPropagation();var t=n.props.dispatch,l=n.number;if(n.title&&n.content){var r={title:n.title.value,body:n.content,labels:n.labels,milestone:n.milestone,callback:function(e){n.props.history.push(e)}};l?t.repository.editIssue(Object(a.a)({},r,{number:l})):t.repository.createIssue(r)}},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.labelsList,n=e.milestonesList,a=e.dispatch,l=this.number;t.length&&n.length||a.repository.initEditor(l)}},{key:"render",value:function(){var e=this,t=this.props,n=t.labelsList,a=t.milestonesList,l=t.loading,r=this.number;return m.a.createElement(j.a,{loading:l},m.a.createElement("div",{className:L.a.editorContainer},m.a.createElement("header",{className:L.a.header},m.a.createElement("h2",null,"\u6587\u7ae0\u7f16\u8f91\u9875")),m.a.createElement("main",null,m.a.createElement("form",null,m.a.createElement("label",{className:L.a.fileds,htmlFor:"title"},"\u6807\u9898\uff1a",m.a.createElement("input",{defaultValue:this.state.title,ref:function(t){return e.title=t},type:"text",id:"title"})),m.a.createElement("label",{className:d()(L.a.fileds,L.a.editorContent),htmlFor:"editor"},"\u5185\u5bb9\uff1a",m.a.createElement(O,{defaultValue:this.state.content,onChange:this.handleChange})),m.a.createElement("label",{className:L.a.fileds,htmlFor:"milestone"},"\u5206\u7c7b\uff1a",a.map(function(t){return m.a.createElement("label",{key:t.id,className:L.a.checkLabel,onClick:e.handleRadioClick},m.a.createElement("input",{type:"radio",name:"categories",value:t.number,checked:e.state.milestone===t.id}),t.title)})),m.a.createElement("label",{className:L.a.fileds,htmlFor:"labels"},"\u6807\u7b7e\uff1a",n.map(function(t){return m.a.createElement("label",{key:t.id,className:L.a.checkLabel,onClick:e.handleCheckboxClick},m.a.createElement("input",{type:"checkbox",value:t.name,name:"label-".concat(t.name),checked:-1!==e.state.labels.indexOf(t.name)}),t.name)})),m.a.createElement("input",{type:"submit",value:r?"\u4fee\u6539":"\u521b\u5efa",className:L.a.submitButton,onClick:this.handleSubmit}))),m.a.createElement("footer",null,m.a.createElement("p",null,"Copyright \xa9",(new Date).getFullYear()," Roy Zhi"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.match,a=e.currentIssue,l=e.milestonesMap,r=e.labelsMap,i=t.prevCurrentIssue,s=n.params.number;if(s&&a&&a.number===+s&&a!==i){var o=a.title||"",u=a.body||"",c=l[a.milestone].number||"",m=a.labels&&a.labels.nodes&&a.labels.nodes.map(function(e){return r[e].name})||[];return{prevCurrentIssue:a,title:o,content:u,milestone:c,labels:m}}return null}}]),t}(c.PureComponent),S=Object(v.a)([function(e){return e.repository.result},function(e){return e.repository.loading},function(e){return e.entities.repositories},function(e){return e.entities.labels},function(e){return e.entities.milestones},function(e){return e.entities.issues}],function(e,t,n,a,l,r){var i,s=[],o=[],u=n[e];if(u&&u.labels&&u.labels.nodes&&u.milestones&&u.milestones.nodes){s=u.labels.nodes.map(function(e){return a[e]}),o=u.milestones.nodes.map(function(e){return l[e]});var c=u.issue;c&&(i=r[c])}return{loading:t,labelsMap:a,labelsList:s,milestonesMap:l,milestonesList:o,currentIssue:i}});t.default=Object(f.b)(S)(Object(h.a)(N))}}]);
//# sourceMappingURL=0.267e787f.chunk.js.map