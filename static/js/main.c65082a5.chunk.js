(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports={container:"style_container__Zb8RY",header:"style_header__3uDEC",navItem:"style_navItem__1wdaT",active:"style_active__1gcS-",articlesContainer:"style_articlesContainer__2mYTI",article:"style_article__2NtwU",articleTitle:"style_articleTitle__RDDaw",articleInfo:"style_articleInfo__2KrYr",articleCategory:"style_articleCategory__18gfE",articleLabel:"style_articleLabel__3y7XL"}},17:function(e,t,n){e.exports={editorContainer:"style_editorContainer__2CpJ4",header:"style_header__b0b1a",fileds:"style_fileds__3fJcb",checkLabel:"style_checkLabel__3_j0j",submitButton:"style_submitButton__1urt6",editorContent:"style_editorContent__1vN33"}},173:function(e,t,n){e.exports={loadingContainer:"style_loadingContainer__3Pquw"}},175:function(e,t,n){e.exports={markdownPreviewer:"style_markdownPreviewer__1aG82"}},177:function(e,t,n){e.exports=n.p+"static/media/github.c9e82c1f.svg"},179:function(e,t,n){e.exports=n(569)},3:function(e,t,n){e.exports={container:"style_container__3FZwK",articleInfo:"style_articleInfo__1d5v-",articleCategory:"style_articleCategory__35I8s",articleLabel:"style_articleLabel__26rCk",articleBody:"style_articleBody__2JILV",issueCommentsContainer:"style_issueCommentsContainer__3eK_x",issueComment:"style_issueComment__2oN0w",commentorAvatar:"style_commentorAvatar__BkYRh",issueCommentHeader:"style_issueCommentHeader__1lxXR",issueCommentContent:"style_issueCommentContent__2bwiX",createCommentContainer:"style_createCommentContainer__mllTZ",createComment:"style_createComment__3rcPo",createCommentAvatar:"style_createCommentAvatar__1v_t3",createCommentHeader:"style_createCommentHeader__3opNa",commentSwitch:"style_commentSwitch__2d5YM",active:"style_active__6_-G8",commentorLogin:"style_commentorLogin__2fsAa",createCommentInputContainer:"style_createCommentInputContainer__2VtH6",createCommentTextarea:"style_createCommentTextarea__mjrW_",createCommentOperator:"style_createCommentOperator__2pW3w"}},565:function(e,t,n){},569:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(170),i=n.n(s),o=n(171),c=n(26),l=n(43),u=n(21),m=n(2),p=n.n(m),d=n(6),h=n(30),f=n.n(h),b=n(15),y={owner:"zhirui1994",repo:"zhirui1994.github.io",token:"MSt6aGlydWkxOTk0KzBhOGZmMjAwNWM3M2NmNmM1YzEzYWQyZmRkZjhjN2E4MDU0NzdlK3poaXJ1aTE5OTQuZ2l0aHViLmlvKzg=",client_id:"635ab95d562259d5e20a",client_secret:"e795e7e409ce731cf304facd92aecd305c774731"},v=new b.b.Entity("milestones"),_=new b.b.Entity("labels"),g=new b.b.Entity("comments"),E=new b.b.Entity("issues",{milestone:v,labels:{nodes:[_]},comments:{nodes:[g]}}),w=new b.b.Entity("repositories",{issue:E,issues:{nodes:[E]},labels:{nodes:[_]},milestones:{nodes:[v]}});function k(){var e=atob(y.token),t=new RegExp("(\\+".concat(y.owner,"\\+|\\+").concat(y.repo,"\\+)"),"g");return e.replace(t,"")}function C(){return x.apply(this,arguments)}function x(){return(x=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("https://api.github.com/graphql",{query:'query { \n                repository(owner: "'.concat(y.owner,'", name: "').concat(y.repo,'") {\n                    id,\n                    labels(first: 100) {\n                        nodes {\n                            id,\n                            name,\n                            color,\n                        } \n                    },\n                    milestones(first:100) {\n                        nodes {\n                            id,\n                            number,\n                            state,\n                            title,\n                        }\n                    },\n                    issues(last:20, states:OPEN) {\n                        pageInfo {\n                            endCursor,\n                            startCursor,\n                            hasNextPage,\n                            hasPreviousPage\n                        },\n                        totalCount,\n                        nodes {\n                            id,\n                            title,\n                            number,\n                            createdAt,\n                            milestone {\n                                id\n                            },\n                            labels(first:100) {\n                                nodes {\n                                    id,\n                                }\n                            }\n                        }\n                    }\n                }\n            }')},{headers:{Authorization:"bearer ".concat(k())}}).then(function(e){return Object(b.a)(e.data.data.repository,w)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function j(e){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("https://api.github.com/graphql",{query:'query { \n                repository(owner: "'.concat(y.owner,'", name: "').concat(y.repo,'") {\n                    id,\n                    issue(number: ').concat(t,") {\n                        id,\n                        title,\n                        number,\n                        bodyHTML,\n                        createdAt,\n                        milestone {\n                            id,\n                            number,\n                            state,\n                            title,\n                        },\n                        labels(first:100) {\n                            nodes {\n                                id,\n                                name,\n                                color,\n                            }\n                        },\n                        comments(last: 20) {\n                            nodes {\n                                id,\n                                author {\n                                    avatarUrl,\n                                    login,\n                                    url,\n                                },\n                                bodyHTML,\n                                createdAt,\n                            }\n                        }\n                    }\n                }\n            }")},{headers:{Authorization:"bearer ".concat(k())}}).then(function(e){return Object(b.a)(e.data.data.repository,w)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function N(){var e={scope:"public_repo, user",redirect_uri:encodeURIComponent("https://zhirui1994.github.io/#/article/1"),client_id:y.client_id},t=Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&");return"https://github.com/login/oauth/authorize?".concat(t)}function I(e){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token",e.abrupt("return",f.a.post("https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token",{code:t,client_id:y.client_id,client_secret:y.client_secret},{headers:{Accept:"application/json"}}).then(function(e){return e&&e.data}));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function M(e){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("https://api.github.com/graphql",{query:"query { \n            viewer {\n                email,\n                id,\n                login,\n                name,\n                url,\n                avatarUrl, \n            }\n        }"},{headers:{Authorization:t}}).then(function(e){return e&&e.data&&e.data.data&&e.data.data.viewer}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function A(e){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(p.a.mark(function e(t){var n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.content,r=t.token,e.abrupt("return",f.a.post("https://api.github.com/graphql",{query:'mutation {\n                addComment(input:{subjectId: "'.concat(n,'", body: "').concat(a,'"}) {\n                    commentEdge {\n                        node {\n                            id,\n                            bodyHTML,\n                            createdAt,\n                            author {\n                                avatarUrl,\n                                login,\n                                url,\n                            },\n                        }\n                    }\n                }\n            }')},{headers:{Authorization:r}}).then(function(e){var t=e&&e.data&&e.data.data&&e.data.data.addComment.commentEdge.node;if(t)return Object(b.a)(t,g)}));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function q(){return H.apply(this,arguments)}function H(){return(H=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("https://api.github.com/graphql",{query:'query {\n                repository(owner: "'.concat(y.owner,'", name: "').concat(y.repo,'") {\n                    id,\n                    labels(first: 100) {\n                        nodes {\n                            id,\n                            name,\n                            color,\n                        } \n                    },\n                    milestones(first:100) {\n                        nodes {\n                            id,\n                            number,\n                            state,\n                            title,\n                        }\n                    },\n                }\n            }')},{headers:{Authorization:"bearer ".concat(k())}}).then(function(e){var t=e&&e.data&&e.data.data&&e.data.data.repository;return!!t&&Object(b.a)(t,w)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function U(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="repo:".concat(y.owner,"/").concat(y.repo," "),t&&t.milestone&&(n+="milestone:".concat(t.milestone," ")),t&&t.labels&&t.labels.length&&(n+=t.labels.map(function(e){return"label:".concat(e," ")}).join("")),t&&t.query&&(n+="".concat(t.query," ")),e.abrupt("return",f.a.post("https://api.github.com/graphql",{query:'query {\n                search(type: ISSUE, last: 20, query: "'.concat(n.trim(),'") {\n                    issueCount\n                    pageInfo {\n                        endCursor\n                        startCursor\n                        hasNextPage\n                        hasPreviousPage\n                    }\n                    nodes {\n                        ... on Issue {\n                            id,\n                            title,\n                            number,\n                            createdAt,\n                            milestone {\n                                id\n                            },\n                            labels(first:100) {\n                                nodes {\n                                    id,\n                                }\n                            }\n                        }\n                    }\n                }\n            }')},{headers:{Authorization:"bearer ".concat(k())}}).then(function(e){var t=e&&e.data&&e.data.data&&e.data.data.search;if(t){var n=Object(b.a)(t.nodes,[E]);return Object(l.a)({},t,{nodes:n.result,entities:n.entities})}return!1}));case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var D=n(76),z={name:"repository",state:{result:"",loading:!0,searchParams:{milestone:"*",labels:[],query:""}},reducers:{update:function(e,t){return D.merge(e,t)}},effects:function(e){return{initIndex:function(){var t=Object(d.a)(p.a.mark(function t(n,a){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.repository.loading){t.next=3;break}return t.next=3,e.repository.update({loading:!0});case 3:return t.next=5,C();case 5:if(!(r=t.sent)){t.next=11;break}return t.next=9,e.entities.update(r.entities);case 9:return t.next=11,e.repository.update({result:r.result,loading:!1});case 11:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),getSingleIssue:function(){var t=Object(d.a)(p.a.mark(function t(n,a){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.repository.loading){t.next=3;break}return t.next=3,e.repository.update({loading:!0});case 3:return t.next=5,j(n);case 5:if(!(r=t.sent)){t.next=11;break}return t.next=9,e.entities.update(r.entities);case 9:return t.next=11,e.repository.update({result:r.result,loading:!1});case 11:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),closeCurrentIssue:function(){var t=Object(d.a)(p.a.mark(function t(n,a){var r,s,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.repository.result,!(s=a.entities.repositories[r])){t.next=7;break}return s.issue=void 0,i={repositories:Object(u.a)({},r,s)},t.next=7,e.entities.update(i);case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),initEditor:function(){var t=Object(d.a)(p.a.mark(function t(n,a){var r,s,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.repository.result,!((s=a.entities.repositories[r])&&s.labels&&s.labels.nodes.length&&s.milestones&&s.milestones.nodes.length)){t.next=4;break}return t.abrupt("return");case 4:if(a.repository.loading){t.next=7;break}return t.next=7,e.repository.update({loading:!0});case 7:return t.next=9,q();case 9:if(!(i=t.sent)){t.next=15;break}return t.next=13,e.entities.update(i.entities);case 13:return t.next=15,e.repository.update({result:i.result,loading:!1});case 15:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),searchIssues:function(){var t=Object(d.a)(p.a.mark(function t(n,a){var r,s,i,o,c,m;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.milestone,s=n.labels,i=n.query,t.next=3,e.repository.update({searchParams:{milestone:r,labels:s,query:i}});case 3:return t.next=5,U({milestone:r,labels:s,query:i});case 5:(o=t.sent)&&(c=a.repository.result,(m=a.entities.repositories[c])&&(m.issues={pageInfo:o.pageInfo,totalCount:o.issueCount,nodes:o.nodes},e.entities.update(Object(l.a)({repositories:Object(u.a)({},c,m)},o.entities))));case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}}},P=n(76),B={name:"entities",state:{repositories:{},issues:{},labels:{},milestones:{},comments:{}},reducers:{update:function(e,t){return P.merge(e,t)}}};function R(){var e=new URLSearchParams(window.location.search),t=e.get("code");if(t){e.delete("code");var n=e.toString(),a="".concat(window.location.pathname).concat(n?"?".concat(n):"").concat(window.location.hash);return window.history.pushState(null,null,a),t}return""}var J=n(76),W={user:{name:"user",state:{loading:!1,auth:!1,accessToken:"",scope:"",tokenType:"",viewer:{email:"",id:"",login:"",name:"",url:"",avatarUrl:""}},reducers:{update:function(e,t){return J.merge(e,t)}},effects:function(e){return{getAuthToken:function(){var t=Object(d.a)(p.a.mark(function t(n,a){var r,s,i,o,c,l,u,m,d;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.user.loading){t.next=3;break}return t.next=3,e.user.update({loading:!0});case 3:if(r=R(),!(s=localStorage.getItem("GITHUB_USER_AUTH"))){t.next=15;break}return i=JSON.parse(s),o=i.access_token,c=i.token_type,l=i.scope,t.next=9,M("".concat(c," ").concat(o));case 9:if(!(u=t.sent)){t.next=13;break}return t.next=13,e.user.update({accessToken:o,tokenType:c,scope:l,auth:!0,loading:!1,viewer:u});case 13:t.next=27;break;case 15:if(!r){t.next=27;break}return t.next=18,I(r);case 18:if(!(m=t.sent)||!m.access_token){t.next=27;break}return localStorage.setItem("GITHUB_USER_AUTH",JSON.stringify(m)),t.next=23,M("".concat(m.token_type," ").concat(m.access_token));case 23:if(!(d=t.sent)){t.next=27;break}return t.next=27,e.user.update({accessToken:m.access_token,tokenType:m.token_type,scope:m.scope,auth:!0,loading:!1,viewer:d});case 27:return t.next=29,e.user.update({loading:!1});case 29:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),addComment:function(){var t=Object(d.a)(p.a.mark(function t(n,a){var r,s,i,o,c,m,d;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.id,s=n.content,i=n.callback,a.user.accessToken){t.next=3;break}return t.abrupt("return");case 3:return o="".concat(a.user.tokenType," ").concat(a.user.accessToken),t.next=6,A({id:r,content:s,token:o});case 6:if(!(c=t.sent)){t.next=14;break}return m=a.entities.issues,(d=m[r]).comments.nodes.push(c.result),t.next=13,e.entities.update(Object(l.a)({issues:Object(u.a)({},r,d)},c.entities));case 13:"function"===typeof i&&i();case 14:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}}},entities:B,repository:z};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=n(570),F=n(571),G=n(372),K=n(23),V=n(24),X=n(27),Q=n(25),$=n(28),ee=n(29),te=n.n(ee),ne=n(55),ae=n.n(ne),re=n(44),se=n(572),ie=n(173),oe=n.n(ie),ce=function(e){var t=e.children,n=e.loading;return void 0===n||n?r.a.createElement("div",{className:oe.a.loadingContainer},r.a.createElement("i",{className:"fa fa-spinner fa-pulse"})):r.a.createElement(a.Fragment,null,t)},le=n(16),ue=n.n(le),me={title:"\u6700\u65b0",id:"default_milestone"},pe={nodes:[],pageInfo:{},totalCount:0},de=function(e){function t(){var e;Object(K.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=Object(X.a)(this,Object(Q.a)(t).call(this,a))).handleCategoryClick=function(t){var n=e.props.dispatch;e.setState({activeMilestone:t});var a=t.id===me.id?"*":t.title;n.repository.searchIssues({milestone:a})},e.state={activeMilestone:me},e}return Object($.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch.repository.initIndex()}},{key:"render",value:function(){var e=this,t=this.state.activeMilestone,n=this.props,a=n.loading,s=n.issuesList,i=n.milestonesList,o=n.milestonesMap,c=n.labelsMap;return r.a.createElement(ce,{loading:a},r.a.createElement("div",{className:ue.a.container},r.a.createElement("header",{className:ue.a.header},r.a.createElement("nav",null,i.map(function(n){return r.a.createElement("span",{onClick:function(){return e.handleCategoryClick(n)},key:n.id,className:te()(ue.a.navItem,Object(u.a)({},ue.a.active,n.title===t.title))},n.title)}))),r.a.createElement("main",{className:ue.a.articlesContainer},s.map(function(e){return r.a.createElement("article",{className:ue.a.article,key:e.id},r.a.createElement(se.a,{to:"/article/".concat(e.number)},r.a.createElement("h3",{className:ue.a.articleTitle},e.title)),r.a.createElement("p",{className:ue.a.articleInfo},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-calendar","aria-hidden":"true"}),ae()(e.createdAt).format("YYYY-MM-DD")),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-th-list","aria-hidden":"true"}),r.a.createElement("span",{className:ue.a.articleCategory},o[e.milestone].title)),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}),e.labels.nodes.map(function(e){var t=c[e];return r.a.createElement("span",{key:t.id,className:ue.a.articleLabel,style:{background:"#".concat(t.color)}},t.name)}))))}))))}}]),t}(a.Component),he=Object(re.a)([function(e){return e.repository.result},function(e){return e.repository.loading},function(e){return e.entities.repositories},function(e){return e.entities.issues},function(e){return e.entities.milestones},function(e){return e.entities.labels}],function(e,t,n,a,r,s,i){var o=n[e],c=Object.keys(r).map(function(e){return r[e]});c.length&&c.unshift(me);var l=pe;return o&&o.issues&&o.issues.nodes&&(l=o.issues),{loading:t,labelsMap:s,milestonesMap:r,milestonesList:c,issuesList:l.nodes.map(function(e){return a[e]}),pageInfo:l.pageInfo,totalCount:l.totalCount}}),fe=Object(c.b)(he)(de),be=n(74),ye=n.n(be),ve=n(175),_e=n.n(ve),ge=n(176),Ee=n.n(ge);n(561);ye.a.setOptions({breaks:!0,highlight:function(e){return Ee.a.highlightAuto(e).value}});var we=function(e){function t(){var e,n;Object(K.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(X.a)(this,(e=Object(Q.a)(t)).call.apply(e,[this].concat(r)))).handleInput=function(e){var t=n.props.onChange,a=n.editor.value;e.preventDefault(),"function"===typeof t&&t(a),n.preview.innerHTML=ye()(a)},n}return Object($.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.defaultValue;e&&(this.preview.innerHTML=ye()(e))}},{key:"render",value:function(){var e=this,t=this.props.defaultValue;return r.a.createElement("div",{className:_e.a.markdownPreviewer},r.a.createElement("textarea",{id:"editor",spellCheck:"false",ref:function(t){return e.editor=t},onInput:this.handleInput,defaultValue:t}),r.a.createElement("section",{id:"preview",ref:function(t){return e.preview=t}}))}}]),t}(a.Component),ke=n(17),Ce=n.n(ke),xe=function(e){function t(){var e,n;Object(K.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(X.a)(this,(e=Object(Q.a)(t)).call.apply(e,[this].concat(r)))).content=void 0,n.handleChange=function(e){n.content=e},n.handleSubmit=function(e){e.preventDefault();var t=n.props.dispatch;n.title&&n.content&&t.issues.create({title:n.title.value,body:n.content})},n}return Object($.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.labelsList,n=e.milestonesList,a=e.dispatch;t.length&&n.length||a.repository.initEditor()}},{key:"render",value:function(){var e=this,t=this.props,n=t.labelsList,a=t.milestonesList;return r.a.createElement("div",{className:Ce.a.editorContainer},r.a.createElement("header",{className:Ce.a.header},r.a.createElement("h2",null,"\u6587\u7ae0\u7f16\u8f91\u9875")),r.a.createElement("main",null,r.a.createElement("form",null,r.a.createElement("label",{className:Ce.a.fileds,htmlFor:"title"},"\u6807\u9898\uff1a",r.a.createElement("input",{ref:function(t){return e.title=t},type:"text",id:"title"})),r.a.createElement("label",{className:te()(Ce.a.fileds,Ce.a.editorContent),htmlFor:"editor"},"\u5185\u5bb9\uff1a",r.a.createElement(we,{onChange:this.handleChange})),r.a.createElement("label",{className:Ce.a.fileds,htmlFor:"milestone"},"\u5206\u7c7b\uff1a",a.map(function(e){return r.a.createElement("label",{className:Ce.a.checkLabel},r.a.createElement("input",{type:"radio",name:"categories",value:e.id}),e.title)})),r.a.createElement("label",{className:Ce.a.fileds,htmlFor:"labels"},"\u6807\u7b7e\uff1a",n.map(function(e){return r.a.createElement("label",{className:Ce.a.checkLabel},r.a.createElement("input",{type:"checkbox",name:"label-".concat(e.name),value:e.id}),e.name)})),r.a.createElement("input",{className:Ce.a.submitButton,onClick:this.handleSubmit,type:"submit",value:"\u521b\u5efa"}))),r.a.createElement("footer",null,r.a.createElement("p",null,"Copyright \xa9",(new Date).getFullYear()," Roy Zhi")))}}]),t}(a.Component),je=Object(re.a)([function(e){return e.repository.result},function(e){return e.repository.loading},function(e){return e.entities.repositories},function(e){return e.entities.labels},function(e){return e.entities.milestones}],function(e,t,n,a,r){var s=[],i=[],o=n[e];return o&&o.labels&&o.labels.nodes&&o.milestones&&o.milestones.nodes&&(s=o.labels.nodes.map(function(e){return a[e]}),i=o.milestones.nodes.map(function(e){return r[e]})),{loading:t,labelsList:s,milestonesList:i}}),Oe=Object(c.b)(je)(xe),Ne=n(573),Ie=n(3),Te=n.n(Ie),Me=n(177),Le=n.n(Me),Ae=function(e){function t(){var e,n;Object(K.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(X.a)(this,(e=Object(Q.a)(t)).call.apply(e,[this].concat(r)))).handleInput=function(e){e.preventDefault();var t=e.currentTarget;t.style.height="auto",t.style.height=t.scrollTop+t.scrollHeight+"px"},n.handleSubmitComment=function(e){e.preventDefault();var t=n.comment.value;if(t){var a=n.props,r=a.dispatch,s=a.currentIssue;r.user.addComment({id:s.id,content:t,callback:function(){n.comment.value=""}})}},n}return Object($.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.match.params.number;t.user.getAuthToken(),t.repository.getSingleIssue(n)}},{key:"componentWillUnmount",value:function(){this.props.dispatch.repository.closeCurrentIssue()}},{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.labelsMap,s=t.commentsMap,i=t.currentIssue,o=t.milestonesMap,c=t.viewer,l=t.isUserLoading;return r.a.createElement(ce,{loading:n},r.a.createElement("div",{className:Te.a.container},r.a.createElement("header",null,r.a.createElement("h1",null,i.title),r.a.createElement("p",{className:Te.a.articleInfo},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-calendar","aria-hidden":"true"}),ae()(i.createdAt).format("YYYY-MM-DD")),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-th-list","aria-hidden":"true"}),r.a.createElement("span",{className:Te.a.articleCategory},i.milestone&&o[i.milestone].title)),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}),i.labels&&i.labels.nodes.map(function(e){var t=a[e];return r.a.createElement("span",{key:t.id,className:Te.a.articleLabel,style:{background:"#".concat(t.color)}},t.name)})))),r.a.createElement("main",null,r.a.createElement("article",{className:te()(Te.a.articleBody,"markdown-body"),dangerouslySetInnerHTML:{__html:i.bodyHTML}}),r.a.createElement("div",{className:Te.a.issueCommentsContainer},i.comments&&i.comments.nodes.map(function(e){var t=s[e];if(t){var n=t.author;return r.a.createElement("section",{key:t.id,className:Te.a.issueComment},r.a.createElement("a",{className:Te.a.commentorAvatar,href:n.url},r.a.createElement("img",{src:n.avatarUrl,alt:"This is commentor's avatar"})),r.a.createElement("p",{className:Te.a.issueCommentHeader},r.a.createElement("a",{href:n.url},r.a.createElement("em",null,n.login)),r.a.createElement("span",null,ae()(t.createdAt).format("YYYY-MM-DD HH:mm:ss"))),r.a.createElement("article",{className:te()(Te.a.issueCommentContent,"markdown-body"),dangerouslySetInnerHTML:{__html:t.bodyHTML}}))}return null}),r.a.createElement("section",{className:Te.a.createCommentContainer},r.a.createElement("div",{className:Te.a.createComment},c.id?r.a.createElement("div",{className:Te.a.createCommentAvatar},r.a.createElement("img",{src:c.avatarUrl,alt:"This is commentor's avatar"})):r.a.createElement("a",{className:Te.a.createCommentAvatar,href:N()},l?r.a.createElement("i",{class:"fa fa-circle-o-notch fa-spin fa-3x fa-fw"}):r.a.createElement("img",{src:Le.a,alt:"This is commentor's avatar"})),r.a.createElement("div",{className:Te.a.createCommentHeader},r.a.createElement("span",{className:te()(Te.a.commentSwitch,Te.a.active)},"\u7f16\u8f91"),r.a.createElement("span",{className:Te.a.commentSwitch},"\u9884\u89c8"),!c.id&&!l&&r.a.createElement("span",{className:Te.a.commentorLogin},"\u901a\u8fc7GitHub",r.a.createElement("a",{href:N()},"\u767b\u9646"))),r.a.createElement("div",{className:Te.a.createCommentInputContainer},r.a.createElement("textarea",{ref:function(t){return e.comment=t},onInput:this.handleInput,className:Te.a.createCommentTextarea,placeholder:"\u8bf7\u7f16\u8f91\u60a8\u7684\u8bc4\u8bba"})),r.a.createElement("div",{className:Te.a.createCommentOperator},r.a.createElement("button",{onClick:this.handleSubmitComment},"\u8bc4\u8bba"))))))))}}]),t}(a.Component),Se=Object(re.a)([function(e){return e.repository.result},function(e){return e.repository.loading},function(e){return e.entities.repositories},function(e){return e.entities.issues},function(e){return e.entities.milestones},function(e){return e.entities.labels},function(e){return e.entities.comments},function(e){return e.user.viewer},function(e){return e.user.loading}],function(e,t,n,a,r,s,i,o,c){var l,u={},m=n[e];return m&&(l=m.issue),l&&(u=a[l]),{loading:t,currentIssue:u,milestonesMap:r,labelsMap:s,commentsMap:i,viewer:o,isUserLoading:c}}),qe=[{path:"/",exact:!0,component:fe},{path:"/editor",exact:!0,component:Oe},{path:"/article/:number",exact:!0,component:Object(c.b)(Se)(Object(Ne.a)(Ae))}],He=function(){return r.a.createElement(Z.a,null,r.a.createElement(F.a,null,qe.map(function(e){return r.a.createElement(G.a,{key:e.path,path:e.path,exact:e.exact,component:e.component})})))};n(565);n.d(t,"store",function(){return Ue});var Ue=Object(o.init)({models:W});i.a.render(r.a.createElement(c.a,{store:Ue},r.a.createElement(He,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[179,2,1]]]);
//# sourceMappingURL=main.c65082a5.chunk.js.map